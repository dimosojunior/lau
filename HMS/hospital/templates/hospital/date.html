YA KWANZA



In the View
Within the controller, you have access directly to the datetime object. That means that you can simply execute the strftime function an pass the format string as first argument:

# -*- coding: utf-8 -*-
from __future__ import unicode_literals

from django.shortcuts import render

# Import Datetime
from datetime import datetime

def index(request):
    # return HttpResponse("<h1>Hello, world !</h1>")
    # Some Date Object, for example a default generated by datetime
    myDate = datetime.now()
    
    # Give a format to the date
    # Displays something like: Aug. 27, 2017, 2:57 p.m.
    formatedDate = myDate.strftime("%Y-%m-%d %H:%M:%S")

    # Do something with the formatted date
    return render(request, 'pages/index.html', {
        'date': formatedDate
    })
In the Template
If you are willing to format the string in the template and not in the view (controller), you can do it with a filter namely date. The following View (controller) returns a date object to a simple template that will print the date sent from the view:

# -*- coding: utf-8 -*-
from __future__ import unicode_literals

from django.shortcuts import render

# Import Datetime class
from datetime import datetime

def index(request):

    # Some Date Object, for example a default generated by datetime
    myDate = datetime.now()

    # Render Some Template with a parameter accesible as date
    return render(request, 'pages/index.html', {
        'myDate': myDate
    })
The content of the following template (index.html) will use the following code to format the providen date object:

Prints something like:  Aug. 27, 2017, 2:57 p.m.
{{ myDate|date:'Y-m-d H:i' }}






























































YA PILI

class Company(models.Model):
    date = models.DateField()
    time = models.TimeField()
c = Company(date=datetime.datetime.now(), time=datetime.datetime.now()) 
Django decides to use DATETIME_INPUT_FORMATS defined within the formats.py file. Which makes sense, because I am passing in a datetime.now() to both fields.

I think I could make Django to use DATE_INPUT_FORMATS and TIME_INPUT_FORMATS respectively, if I passed in only the current date and current time in.

Something like this:

c = Company(date=datetime.date.now(), time=datetime.time.now()) 
But this obviously throws an exception as now doesn't exist like that. Is there a different way to achieve this?

python
django
django-models
Share
Improve this question
Follow
edited Apr 24 '19 at 23:08

daaawx
2,53822 gold badges1313 silver badges1515 bronze badges
asked Aug 19 '12 at 21:33

Houman
59.7k7777 gold badges245245 silver badges421421 bronze badges
Add a comment
6 Answers

153

For the date, you can use datetime.date.today() or datetime.datetime.now().date().

For the time, you can use datetime.datetime.now().time().

However, why have separate fields for these in the first place? Why not use a single DateTimeField?

You can always define helper functions on the model that return the .date() or .time() later if you only want one or the other.

Share
Improve this answer
Follow
edited Aug 19 '12 at 21:52
answered Aug 19 '12 at 21:40

Amber
462k7777 gold badges604604 silver badges535535 bronze badges
It works Amber many thanks. :) Can accept in 5 min. The reason I need it this way is because of internationalization and getting American time and date formats translated to the rest of the worlds. :) – 
Houman
 Aug 19 '12 at 21:44
5
For timezone support, I think it's still better to use a DateTimeField to always store the UTC datetime and then transpose the date to the current timezone at query time. – 
Joucks
 Aug 19 '12 at 21:47
@Kave Yeah, what piouk said. Use a DateTimeField that stores UTC and only translate to the relevant timezone (using something like pytz) when you go to display the time. Not only is this a better way of storage, but you also get timezone handling for free because pytz was already written for you. – 
Amber
 Aug 19 '12 at 21:52 
Add a comment

67

import datetime
datetime.datetime.now().strftime ("%Y%m%d")
20151015
For the time

from time import gmtime, strftime
showtime = strftime("%Y-%m-%d %H:%M:%S", gmtime())
print showtime
2015-10-15 07:49:18
Share
Improve this answer
Follow
edited Dec 24 '15 at 9:32

narendra-choudhary
3,97733 gold badges3535 silver badges5252 bronze badges
answered Oct 15 '15 at 7:51

Abdul Razak
2,25422 gold badges1515 silver badges2323 bronze badges
Add a comment

28

import datetime

datetime.date.today()  # Returns 2018-01-15

datetime.datetime.now() # Returns 2018-01-15 09:00